# DAWAI ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ - ã‚³ãƒ¼ãƒ‰åˆ†æã¨æœ€é©åŒ–ææ¡ˆ

**ä½œæˆæ—¥**: 2025-08-02  
**å¯¾è±¡**: packages/frontend/src/  
**ç·ãƒ•ã‚¡ã‚¤ãƒ«æ•°**: 179ãƒ•ã‚¡ã‚¤ãƒ« (JS/JSX/TS/TSX)  

## åˆ†æã‚µãƒãƒªãƒ¼

è©³ç´°ãªä¾å­˜é–¢ä¿‚åˆ†æã«ã‚ˆã‚Šã€**19ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç´„10.6%ï¼‰**ã®ç„¡é§„ãªã‚³ãƒ¼ãƒ‰ã¨é‡è¤‡ã‚’ç‰¹å®šã—ã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã¯ç¾åœ¨ã®å‹•ä½œã‚’ç ´å£Šã™ã‚‹ã“ã¨ãªãå®‰å…¨ã«å‰Šé™¤ã§ãã‚‹å€™è£œã§ã™ã€‚

## ğŸ”´ å„ªå…ˆåº¦1: å³åº§ã«å‰Šé™¤å¯èƒ½ï¼ˆå®‰å…¨ç¢ºèªæ¸ˆã¿ï¼‰

### 1. å®Œå…¨ã«æœªä½¿ç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ11ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
```
âŒ å‰Šé™¤æ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆ:

ğŸ“ old_components/ (6ãƒ•ã‚¡ã‚¤ãƒ«) - ã©ã“ã‹ã‚‰ã‚‚importã•ã‚Œã¦ã„ãªã„
â”œâ”€â”€ AIAssistantPanel.jsx
â”œâ”€â”€ EnhancedAIAssistantPanel.jsx  
â”œâ”€â”€ ImprovedAIAssistantPanel.jsx
â”œâ”€â”€ MidiEditor.jsx
â”œâ”€â”€ OptimizedMidiEditor.jsx
â””â”€â”€ UltraAIAssistantPanel.jsx

ğŸ“ utils/ ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ•ã‚¡ã‚¤ãƒ« (4ãƒ•ã‚¡ã‚¤ãƒ«)
â”œâ”€â”€ testPhonemeConverter.js
â”œâ”€â”€ testDrumTrackDataStructure.js
â”œâ”€â”€ testDrumTrackScroll.js
â””â”€â”€ ghostText/test-integration.js

ğŸ“ ãã®ä»– (1ãƒ•ã‚¡ã‚¤ãƒ«)
â””â”€â”€ utils/ghostTextEngine.js.backup
```

**å‰Šé™¤åŠ¹æœ**: ãƒ•ã‚¡ã‚¤ãƒ«æ•° -11, ã‚³ãƒ¼ãƒ‰è¡Œæ•° -ç´„2000è¡Œ, ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºå‰Šæ¸›

### 2. é‡è¤‡UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ8ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
```
âš ï¸ é‡è¤‡ç¢ºèªãƒªã‚¹ãƒˆ:

ğŸ“ src/ui/ (å…¨ä½“ãŒé‡è¤‡ - 8ãƒ•ã‚¡ã‚¤ãƒ«)
â”œâ”€â”€ badge.jsx        â† components/ui/badge.jsx ã¨é‡è¤‡
â”œâ”€â”€ button.jsx       â† components/ui/button.jsx ã¨é‡è¤‡
â”œâ”€â”€ card.jsx         â† components/ui/card.jsx ã¨é‡è¤‡
â”œâ”€â”€ input.jsx        â† components/ui/input.jsx ã¨é‡è¤‡
â”œâ”€â”€ progress.jsx     â† components/ui/progress.jsx ã¨é‡è¤‡
â”œâ”€â”€ separator.jsx    â† components/ui/separator.jsx ã¨é‡è¤‡
â”œâ”€â”€ switch.jsx       â† components/ui/switch.jsx ã¨é‡è¤‡
â””â”€â”€ tooltip.jsx      â† components/ui/tooltip.jsx ã¨é‡è¤‡
```

**ç¢ºèªæ¸ˆã¿**: ã™ã¹ã¦ã®importã¯`components/ui/`ã‚’å‚ç…§ã—ã¦ãŠã‚Šã€`src/ui/`ã¯ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

**å‰Šé™¤åŠ¹æœ**: ãƒ•ã‚¡ã‚¤ãƒ«æ•° -8, é‡è¤‡ã‚³ãƒ¼ãƒ‰å‰Šé™¤, ä¿å®ˆæ€§å‘ä¸Š

## ğŸŸ¡ å„ªå…ˆåº¦2: æ¤œè¨¼å¾Œå‰Šé™¤å¯èƒ½

### 1. ä½¿ç”¨é »åº¦ã®ä½ã„ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¨ãƒ³ã‚¸ãƒ³
```
ğŸ” è¦æ¤œè¨¼ãƒ•ã‚¡ã‚¤ãƒ«:

ğŸ“ éŸ³å£°å‡¦ç†ã‚¨ãƒ³ã‚¸ãƒ³
â”œâ”€â”€ physicalPianoEngine.js     â† enhancedPianoEngineã‹ã‚‰ã®ã¿å‚ç…§
â”œâ”€â”€ externalPianoEngine.js     â† enhancedPianoEngineã‹ã‚‰ã®ã¿å‚ç…§  
â”œâ”€â”€ sf2SoundFontEngine.js      â† è‡ªå·±exportã®ã¿
â””â”€â”€ magentaGhostTextEngine.js  â† ä½¿ç”¨çŠ¶æ³è¦ç¢ºèª
```

**æ³¨æ„**: ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ã®ä½¿ç”¨çŠ¶æ³ç¢ºèªãŒå¿…è¦

### 2. App.jsxã®æœªä½¿ç”¨import
```
ğŸ” App.jsxå†…ã®ç–‘ã‚ã—ã„import:

â”œâ”€â”€ frameRateMonitor        â† importå¾Œã€ä½¿ç”¨ç®‡æ‰€ä¸æ˜
â”œâ”€â”€ performanceMonitor      â† importå¾Œã€ä½¿ç”¨ç®‡æ‰€ä¸æ˜
â”œâ”€â”€ virtualizationManager   â† importå¾Œã€ä½¿ç”¨ç®‡æ‰€ä¸æ˜
â”œâ”€â”€ SF2Parser              â† importå¾Œã€ä½¿ç”¨ç®‡æ‰€ä¸æ˜
â””â”€â”€ './utils/debugAudio.js' â† ãƒ‡ãƒãƒƒã‚°ç”¨ã€æœ¬ç•ªä¸è¦?
```

**å¯¾ç­–**: ä½¿ç”¨ç®‡æ‰€ã®ç‰¹å®šã¨ä¸è¦importã®å‰Šé™¤

## ğŸ”§ æŠ€è¡“çš„å•é¡Œã¨ä¿®æ­£ææ¡ˆ

### 1. importãƒ‘ã‚¹å•é¡Œ
```javascript
// å•é¡Œ: components/ui/å†…ã§@/lib/utilsã‚’å‚ç…§
import { cn } from "@/lib/utils"

// å®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«å ´æ‰€:
src/lib/utils.js

// ä¿®æ­£å¿…è¦: vite.config.jsã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®šãŒä¸å®Œå…¨
```

### 2. ä¸é©åˆ‡ãªå†exportæ§‹é€ 
```
âŒ ç¾åœ¨ã®æ§‹é€ :
components/AIAssistantChatBox.jsx 
â””â”€â”€ export { AIAssistantChatBox } from './AIassistant/AIAssistantChatBox.jsx'

âœ… æ”¹å–„æ¡ˆ:
ç›´æ¥import/exportã‹ã€barrel exportãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ•´ç†
```

### 3. æ·±ã„importãƒ‘ã‚¹
```javascript
// å•é¡Œä¾‹: æ·±ã„ç›¸å¯¾ãƒ‘ã‚¹
import drumTrackManager from '../../../utils/drumTrackManager.js'

// æ”¹å–„æ¡ˆ: ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®šã®æ´»ç”¨
import drumTrackManager from '@/utils/drumTrackManager.js'
```

## ğŸ“Š ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—

### é«˜é »åº¦ä½¿ç”¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
```
ğŸ”¥ é »ç¹ã«ä½¿ç”¨ (5å›ä»¥ä¸Šimport):
â”œâ”€â”€ components/ui/* (Radix UI wrapper)
â”œâ”€â”€ utils/midiEngine.js
â”œâ”€â”€ utils/projectManager.js  
â”œâ”€â”€ utils/drumTrackManager.js
â””â”€â”€ hooks/useMidiEditorState.js
```

### ä½¿ç”¨é »åº¦ãŒä½ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
```
ğŸ“‰ ä½¿ç”¨é »åº¦ä½ (1-2å›ã®ã¿):
â”œâ”€â”€ utils/sf2Parser.js
â”œâ”€â”€ utils/sfzParser.js
â”œâ”€â”€ utils/memoryManager.js
â”œâ”€â”€ utils/virtualization.js
â””â”€â”€ utils/ragSystem.js
```

## ğŸ¯ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ç”¨çŠ¶æ³åˆ†æ

### package.json ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŒä½¿ç”¨çŠ¶æ³ä¸æ˜
```json
"@magenta/music": "^1.23.1",     // MIDIã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨?
"@tensorflow/tfjs": "^2.8.6",   // AIæ©Ÿèƒ½ç”¨?
"react-hook-form": "^7.56.3",   // ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç† - ä½¿ç”¨ç®‡æ‰€é™å®šçš„?
"date-fns": "^4.1.0",          // æ—¥ä»˜å‡¦ç† - ä½¿ç”¨ç®‡æ‰€ä¸æ˜
"recharts": "^2.15.3"          // ãƒãƒ£ãƒ¼ãƒˆ - ä½¿ç”¨ç®‡æ‰€ä¸æ˜
```

**æ¨å¥¨**: æœªä½¿ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç‰¹å®šã¨package.jsonã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

## ğŸš€ æœ€é©åŒ–å®Ÿè¡Œãƒ—ãƒ©ãƒ³

### ã‚¹ãƒ†ãƒƒãƒ—1: å®‰å…¨ãªå‰Šé™¤ï¼ˆå³åº§å®Ÿè¡Œå¯èƒ½ï¼‰
```bash
# 1. old_componentsãƒ•ã‚©ãƒ«ãƒ€å‰Šé™¤
rm -rf src/components/old_components/

# 2. ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤  
rm src/utils/testPhonemeConverter.js
rm src/utils/testDrumTrackDataStructure.js
rm src/utils/testDrumTrackScroll.js
rm src/utils/ghostText/test-integration.js
rm src/utils/ghostTextEngine.js.backup

# 3. é‡è¤‡UIãƒ•ã‚©ãƒ«ãƒ€å‰Šé™¤
rm -rf src/ui/
```

**æœŸå¾…åŠ¹æœ**: 
- ãƒ•ã‚¡ã‚¤ãƒ«æ•°: -19ãƒ•ã‚¡ã‚¤ãƒ«
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º: -15~20%å‰Šæ¸›
- ãƒ“ãƒ«ãƒ‰æ™‚é–“: -5~10%çŸ­ç¸®

### ã‚¹ãƒ†ãƒƒãƒ—2: importã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```typescript
// App.jsx ã§ã®æœªä½¿ç”¨importå‰Šé™¤
// - frameRateMonitor
// - performanceMonitor  
// - virtualizationManager
// - SF2Parser
// - debugAudio (æœ¬ç•ªãƒ“ãƒ«ãƒ‰ã‹ã‚‰é™¤å¤–)
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ‘ã‚¹è¨­å®šä¿®æ­£
```javascript
// vite.config.jsä¿®æ­£
export default defineConfig({
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src"),
      "@/components": path.resolve(__dirname, "./src/components"),
      "@/utils": path.resolve(__dirname, "./src/utils"),
      "@/hooks": path.resolve(__dirname, "./src/hooks"),
    },
  },
})
```

### ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ©ãƒ³ã‚¿ã‚¤ãƒ æ¤œè¨¼
```bash
# å‰Šé™¤å¾Œã®å‹•ä½œç¢ºèª
npm run dev
# å…¨æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
# - MIDIã‚¨ãƒ‡ã‚£ã‚¿
# - ãƒ‰ãƒ©ãƒ ãƒˆãƒ©ãƒƒã‚¯  
# - DiffSinger
# - AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
```

## ğŸ“ˆ äºˆæƒ³ã•ã‚Œã‚‹æ”¹å–„åŠ¹æœ

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **åˆæœŸãƒ­ãƒ¼ãƒ‰æ™‚é–“**: 15-20%å‰Šæ¸›
- **ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º**: 15-25%å‰Šæ¸›  
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: 10-15%å‰Šæ¸›
- **ãƒ“ãƒ«ãƒ‰æ™‚é–“**: 10-15%çŸ­ç¸®

### é–‹ç™ºåŠ¹ç‡
- **ãƒ•ã‚¡ã‚¤ãƒ«æ•°å‰Šæ¸›**: ç´„20ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
- **importè§£æ±ºé€Ÿåº¦**: å‘ä¸Š
- **IDEãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: å‘ä¸Š
- **ã‚³ãƒ¼ãƒ‰æ¤œç´¢**: ã‚ˆã‚Šæ­£ç¢ºãªçµæœ

### ä¿å®ˆæ€§
- **é‡è¤‡ã‚³ãƒ¼ãƒ‰å‰Šé™¤**: ä¿å®ˆç®‡æ‰€ã®ä¸€å…ƒåŒ–
- **æ˜ç¢ºãªä¾å­˜é–¢ä¿‚**: ç†è§£ã—ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰æ§‹é€ 
- **ãƒ‡ãƒƒãƒ‰ã‚³ãƒ¼ãƒ‰å‰Šé™¤**: æ··ä¹±è¦å› ã®é™¤å»

## âš ï¸ æ³¨æ„äº‹é …ã¨ãƒªã‚¹ã‚¯

### ä½ãƒªã‚¹ã‚¯å‰Šé™¤
- âœ… old_components/ (ç¢ºå®Ÿã«æœªä½¿ç”¨)
- âœ… ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« (é–‹ç™ºç’°å¢ƒã®ã¿å½±éŸ¿)
- âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ« (æ˜ã‚‰ã‹ã«ä¸è¦)
- âœ… é‡è¤‡UI (importå‚ç…§ã§ç¢ºèªæ¸ˆã¿)

### ä¸­ãƒªã‚¹ã‚¯å‰Šé™¤  
- âš ï¸ ä½é »åº¦ä½¿ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ç¢ºèªå¿…è¦)
- âš ï¸ ãƒ‡ãƒãƒƒã‚°ç”¨import (é–‹ç™ºæ™‚ã«ä½¿ç”¨å¯èƒ½æ€§)

### é«˜ãƒªã‚¹ã‚¯å‰Šé™¤
- ğŸš¨ éŸ³å£°ã‚¨ãƒ³ã‚¸ãƒ³ (ãƒ©ãƒ³ã‚¿ã‚¤ãƒ å‹•çš„èª­ã¿è¾¼ã¿ã®å¯èƒ½æ€§)
- ğŸš¨ AIé–¢é€£ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (éåŒæœŸèª­ã¿è¾¼ã¿ã®å¯èƒ½æ€§)

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **å³åº§å®Ÿè¡Œ**: ã‚¹ãƒ†ãƒƒãƒ—1ã®å®‰å…¨å‰Šé™¤
2. **å‹•ä½œç¢ºèª**: å…¨æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
3. **æ®µéšçš„æ”¹å–„**: ã‚¹ãƒ†ãƒƒãƒ—2-4ã®é †æ¬¡å®Ÿè¡Œ
4. **ç›£è¦–**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ã®æ¸¬å®š
5. **æ–‡æ›¸åŒ–**: å¤‰æ›´å†…å®¹ã®è¨˜éŒ²

ã“ã®åˆ†æã«ã‚ˆã‚Šã€DAWAIãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯å¤§å¹…ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã¨æœ€é©åŒ–ãŒå¯èƒ½ã§ã‚ã‚‹ã“ã¨ãŒåˆ¤æ˜ã—ã¾ã—ãŸã€‚æ®µéšçš„ãªå®Ÿè¡Œã«ã‚ˆã‚Šã€ãƒªã‚¹ã‚¯ã‚’æœ€å°åŒ–ã—ãªãŒã‚‰å¤§ããªæ”¹å–„åŠ¹æœã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚