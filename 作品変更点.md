# DAWAI プロジェクト変更点と開発経緯

新たに、DAWAI_server.zipを追加しました！

## 相談会で話したこと

1. 訴求点をはっきりさせるべき - どんな人でも作曲できるように？　ex使ってない人が使ってみたなど。ターゲット層に使ってもらう。
2. 実際にもらったフィードバックをもとにもっと改善するべき。
3. 作り手が作りたいものを作る、よりもほかの人に使ってもらうことを想定しているのであれば、もっと使ってもらってフィードバックを受けるべき。
4. プログラミングコンテストという名義上、プログラムを見るべき。
5. 未経験者がどのくらいで使えるようになるのかを説明。
6. 階層的設計書、要件定義などの手法をまとめて入れる。
7. 自分の手で作るとなると半年以上かかるという内容とかも入れてもいい。

よって、まずなぜこのプロジェクトを作り始めたかその経緯をもとに、自分の訴求点を明確にし、それがどのように変更につながっていったのかを述べようと思います。

## プロジェクト開発の背景

### 音楽制作への想い

私は中学生のころに楽曲づくりに励んでおり、ピアノも毎日練習していました。しかし、ピアノを始めるのが遅かったのもあり必要な音楽理論や音楽制作のノウハウを十分に身に着けずに進めていたため、自分が納得するような楽曲をつくることがうまくできませんでした。また、そのころから同時にプログラミングの世界にもはまっていきいつか音楽制作をプログラミングの力を得てもっと効率化させてみたいなという気持ちを抱えていました。

### 開発のきっかけ

高校ではロボコンとディベート、また受験などで忙しく音楽制作に取り組めていませんでした。そして、東京大学に合格した今、早速音楽制作を再開してみよう、と思った矢先、自分の使っていたDAWのアカウント名とパスワードを忘れてしまい使えなくなっていました。

新しいDAWを使おうと探してみるとどのソフトも高価で初心者の自分には到底使わないような高機能を備えており、要求するPCのスペックもとても高いものでした。そこで、U22プログラミングコンテストを発見しどうせならDAWを自作してみようと開発を進め始めました。

### AIとの協業による開発

また、同時期に空前のAIブームが起こり、若きエンジニアとしてはこの波に乗るべくAIの最新情報を取り入れるように動きました。そこでAIによるプログラミング、いわゆるバイブコーディングがあることを知り、早速試してみよう、との気持ちでDAWAIにAI技術をふんだんに詰め込みました。なのでDAWAIのコードのおよそ9割はAIに書かれたものになっています。

この開発を進めていくうちに、自分はあることに気づきました。AIに完全に任せたAI自立型の開発はリポジトリ内にごみが増えすぎてそれらの情報を把握しきれずにAIが破綻し、精度が悪く結果的に開発フローが高速で進みにくい環境を作ってしまうということです。なので、自分はclaude codeのようなどちらかというとAIの自立性が重要視される分野よりもCursorのような人間とAIが密に接している伴走型のプログラミングのほうがうまくいくし魅力的であると強く感じました。

これは音楽世界でも同様です。Sunoなどの音楽制作を任せるAIはすぐに作ってくれる利点はありますが、少しの変更が指示されたとき、その対応が人間と密に共有するAIに比べて正確になりにくいです。人間とAIの協業、AIによる補助こそがこれからの時代数年間続く理想形態であると強く信じています。この思想から、AI agent機能とghost note機能を追加しました。

## 訴求点の変遷とターゲットの明確化

人に見せるとなると、実際に人に使ってもらえるようなものにしたいな、という思いも生まれてきました。よって、より大衆に受けるであろうデザイン、システムについてうまく回してみました。

当初の訴求点は初心者から上級者まですべての人がAIの助けを借りて音楽制作をより楽しく、簡単に、独創的に楽しめることでした。しかし、実際に出来上がったものは上級者に日常的に使ってもらうことを想定すると機能の洗練がまだ足りず、時間が足りません。

なので、とりあえず現状は自分のような音楽理論初心者が楽しく、簡単に、独創的に音楽制作を楽しめるものを作ることをベースに変更を加え、その将来性、アイデア性、ビジネス性をアピールしようと考えました。

### DAWAIの核となる思想

DAWAIの独自性の高いAIに"任せる"音楽制作ではなくAIが"補助する"音楽制作を模索するべきという理念と次の3つの要素：

1. わかりやすい音作り体験
2. AIによるghost note設置、先読み機能の創作補助
3. AIエージェントによる自然言語処理

これらとともに、最終的に初心者から上級者まですべての人が音楽制作により気楽に楽しく独創的に取り組める環境を作りたいと考えています。しかし同時に、音楽理論に疎い自分が楽しく使うことができるAI統合型のDAWを作る、という当初の開発動機もぶれておらず、自分のために作るという意識も強いです。

## ユーザーフィードバックに基づく改善

そこで、母親に実際に試してもらいました。その結果、音楽初心者である母からすると、操作性がよくなくどこから手を付けてよいかわからないとの意見をもらいました。

そこで、デモソングの追加を行いました。計12個のデモソングを追加し、満足するまで試してもらいました。その結果、まったく音楽のことを知らない母も実際に30秒程度の簡単な曲を作成できるようになりました。母からするとまだAI機能について満足いっていないようですが、将来性やビジネス性はとても高くより洗練された形で作ることができればブレイクスルーを起こすことができる可能性のある作品だというお言葉をもらいました。

## 階層的設計書システムの構築

また、AIによるプログラミングについてより健全で確立されたシステムを作りたい、とても深く突き詰めたいとの思いから次の2要素を含んだ構造的仕様書システムを構築しました。

1. **階層的設計書システム（specsディレクトリ）**: L1（システム全体）からL3（実装詳細）まで階層的に整理された仕様書。AIが迷わずコードを生成できるよう、アーキテクチャ、要件定義、設計フロー、状態遷移などを体系的に文書化。

2. **コード品質管理ツール群**: AIが生成したコードの健全性を自動チェックするツール（health_checker.py、code_quality_checker.py、sync_checker.pyなど）を開発。これによりAIとの協業でもコードベースの品質を維持。

このシステムにより、AIに対して「どこに何があるか」「どのような設計思想か」を明確に伝えられるようになり、開発効率が大幅に向上しました。

## 技術的な挑戦と解決

開発を進める中で、いくつかの重要な技術的課題に直面しました：

**1. AIアシスタント機能の安定化**

当初、AIアシスタントのレスポンスが不安定で、フロントエンドとの連携にバグが頻発していました（コミット履歴の「assistant fix」系の連続を参照）。これを解決するため、以下の改善を実施：
- CORS設定の厳格化（セキュリティ向上）
- ノートデータ形式の統一（start→time、velocity正規化）
- フォールバック処理の強化
- 新しいヘルスチェックエンドポイントの追加

**2. 音楽制作機能の拡張**

母親のフィードバックを受けて、より直感的な音楽制作を実現するため：
- ベーストラック機能の実装（サンプリング音源付き）
- ジャンル管理システムの導入（様々な音楽ジャンルに対応）
- 音楽理論エンジンの実装（スケール、コード進行の自動提案）

**3. プロジェクト構造のリファクタリング**

AIとの協業を続ける中で、コードが複雑化してきたため、以下のアーキテクチャ改善を実施：
- マネージャークラスの導入（AppSettingsManager、EventHandlersManager、ProjectManager）
- カスタムフックの分離（機能ごとに独立したフック）
- ファクトリーパターンの採用（プロジェクト生成の標準化）
- 責任の分離による保守性向上

## 開発期間と工数

このプロジェクトは、AIの力を借りても約3ヶ月の開発期間を要しました。もし自分一人で全てを手作業で書いていたら、優に半年以上、おそらく1年以上かかっていたでしょう。

- **総ファイル数**: 200ファイル以上
- **総コード行数**: 約15,000行以上
- **AIによる生成割合**: 約90%
- **人間による設計・レビュー**: 約10%

重要なのは、このプロジェクトが「AIに丸投げ」ではなく、「人間が設計・判断し、AIが実装を担当」という理想的な協業形態で進められたことです。この思想をDAWAIにも反映しようと努力しました。

## 成果と今後の展望

このプロジェクトを通じて、以下のことを実現しました：

### ✅ 実現できたこと

- AIアシスタントによる作曲支援機能
- リアルタイムなゴーストノート提案
- 12個のデモソングによる学習機能
- ベース、ドラム、メロディの実装
- 階層的設計書による開発効率化

### 📈 得られた知見

- AIとの協業における最適な開発フロー
- 「自立型AI」vs「伴走型AI」の実用性比較
- 大規模プロジェクトでのAI活用の限界と可能性
- コード品質を維持しながらAIを活用する方法

### 🎯 最終的な訴求点

**「音楽初心者でも、AIの力を借りて本格的な音楽制作ができるDAW」**

- 音楽理論を知らなくても作曲可能
- AIアシスタントが次の音を提案
- デモソングで学びながら制作
- 軽量で高スペックPCが不要

また、サークルの先輩であり、u22プログラミングコンテスト2023の最優秀作品受賞者の真家さんにもフィードバックをもらいました。

真家さんのコメント↓
AIの補完については，補完結果があまり音楽的に思えなかったのと，補完候補を比較する際，ピアノロール上の配置と予測確率しか手がかりがないのが難しく感じました。それらの手掛かりからどんな旋律になるか想像するのは，特に初心者にとっては耳で聴かない限り難しいように思います。
AIアシスタントについては自分の環境からは使用できませんでした。それからチャット欄への文章の入力中にデリートしたりカーソルを移動しようとしたりすると別のところが反応してしまい，うまく文章を入力することができませんでした。
UI全体については，リージョンの概念がない以外に既存のDAWとの違いがぱっと見わかりませんでした。
AIに任せるのではない音楽制作という方向性は自分も共感するところなので，AIとユーザーがより双方向にやり取りできるようなインタフェースに磨いていってもらえたらと思います。

これらのフィードバックをもとに更なる改善を加えたいと考えています。

### 🚀 今後の発展性

- より高度なAI作曲支援機能
- クラウド連携によるプロジェクト共有
- モバイル版の開発
- コミュニティ機能の追加

## おわりに

このプロジェクトは、「AIと人間の理想的な協業」を音楽制作の分野で具現化した作品です。これからの時代、AIは人間の創造性を奪うのではなく、より多くの人が創造的な活動に参加できるよう支援する存在であるべきだと信じています。